<%#
  # $HeadURL$
  # $Id$
  #
  # Copyright (c) 2009-2012 by Public Library of Science, a non-profit corporation
  # http://www.plos.org/
  #
  # Licensed under the Apache License, Version 2.0 (the "License");
  # you may not use this file except in compliance with the License.
  # You may obtain a copy of the License at
  #
  #     http://www.apache.org/licenses/LICENSE-2.0
  #
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS,
  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  # See the License for the specific language governing permissions and
  # limitations under the License.
-%>

<div class="content">
  <% cache @source do %>
    <div class="page-header" id="page-header">
      <%= render :partial => 'page-header', :locals => { :status => " <small class=\"hidden-phone\">#{@source.status}</small>".html_safe } %>
    </div>

    <dl class="dl-horizontal" id="dl-horizontal">
      <%= render :partial => 'dl-horizontal' %>
    </dl>

    <ul class="nav nav-tabs">
      <li class="active"><a href="#summary" data-toggle="tab" title="Summary">Summary</a></li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Most-Cited <b class="caret"></b></a>
        <ul class="dropdown-menu">
        <li><a href="#most-cited7" data-toggle="tab">7 days</a></li>
        <li><a href="#most-cited30" data-toggle="tab">30 days</a></li>
        <li><a href="#most-cited12" data-toggle="tab">12 months</a></li>
        <li><a href="#most-cited" data-toggle="tab">All-time</a></li>
        </ul>
      </li>
      <li class="hidden-phone"><a href="#configuration" data-toggle="tab" title="Configuration">Configuration</a></li>
      <% if @doc[:text] %>
        <li class="hidden-phone"><a href="#documentation" data-toggle="tab" title="Documentation">Documentation</a></li>
      <% end %>
    </ul>

    <div class="tab-content">
      <div class="tab-pane active" id="summary">
        <div id="source-show">
          <%= render :partial => 'admin/sources/show', :locals => { :name => @source.name } %>
        </div>
        <% if Article.count > 0 %>
          <div class="row">
            <div class="span4" id="chart_status">
              <%= javascript_tag do -%>
                <%= render :partial => 'status', formats: :js, :locals => { :name => @source.name } %>
              <% end %>
            </div>
            <div class="span4" id="chart_day">
              <%= javascript_tag do -%>
                <%= render :partial => 'day', formats: :js, :locals => { :name => @source.name } %>
              <% end %>
            </div>
            <div class="span4" id="chart_month">
              <%= javascript_tag do -%>
                <%= render :partial => 'month', formats: :js, :locals => { :name => @source.name } %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="tab-pane hidden-phone" id="configuration">
        <%= render :partial => 'configuration' %>
      </div>
      <%= render :partial => 'tab-content', :locals => { :pane => "tab-pane hidden-phone" } %>
    </div>
  <% end %>
</div>
