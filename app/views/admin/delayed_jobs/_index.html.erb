<% unless @sources.empty? %>
  <table class="table table-striped" id="JobsTable">
    <thead>
      <tr>
        <th>Source</th>
        <th>Status</th>
        <th class="hidden-phone number">Queuing</th>
        <th class="hidden-phone number">Pending</th>
        <th class="hidden-phone number">Working</th>
        <% unless Article.has_many? %>
          <th class="hidden-phone number">Stale&nbsp;Articles</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @sources.each do|source| %>
        <% cache [source, @delayed_jobs] do %>
          <tr>
          <td><%= link_to h(source.display_name), admin_source_path(source) %></td>
          <td><%= state_label(source.human_state_name).html_safe %></td>
          <td class="hidden-phone number"><%= number_not_showing_zero(source.get_queueing_job_count) %></td>
          <td class="hidden-phone number"><%= number_not_showing_zero(source.delayed_jobs.count - source.delayed_jobs.count(:locked_at)) %></td>
          <td class="hidden-phone number"><%= number_not_showing_zero(source.delayed_jobs.count(:locked_at)) %></td>
          <% unless Article.has_many? %>
            <td class="hidden-phone number"><%= number_not_showing_zero(source.retrieval_statuses.stale.count) %></td>
          <% end %>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div class="alert alert-info">No active sources found</div>
<% end %>
