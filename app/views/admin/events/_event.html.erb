<script type="text/javascript">
  var data = gon.events
  var labels = gon.labels

  var m = 200; // left margin for labels
  var p = 10;  // padding on all sides
  var w = 540; // width of drawing area
  var r = 30;  // row height
  
  var chart = d3.select("div#event").append("svg")
    .attr("width", w + m + p)
    .attr("height", data.length * r + p)
    .attr("class", "chart")
    .append("g")
    .attr("transform", "translate(210,10)");
  var x = d3.scale.log()
    .domain([1, d3.max(data)])
    .range([1, 550]);
  var y = d3.scale.ordinal()
    .domain(labels)
    .rangeBands([0, data.length * r]);
  chart.selectAll("rect")
    .data(data)
    .enter().append("rect")
    .attr("fill", "#789aa1")
    .attr("y", y)
    .attr("width", x)
    .attr("height", y.rangeBand());
  chart.selectAll("text.labels")
    .data(labels)
    .enter().append("text")
    .attr("x", 0)
    .attr("y", function(d) { return y(d) + y.rangeBand() / 2; })
    .attr("dx", -200) // padding-right
    .attr("dy", ".35em") // vertical-align: middle
    .text(String)
  chart.selectAll("text.values")
    .data(data)
    .enter().append("text")
    .attr("x", x)
    .attr("y", function(d) { return y(d) + y.rangeBand() / 2; })
    .attr("dx", 3) // padding-right
    .attr("dy", ".35em") // vertical-align: middle
    .text(String)
</script>
