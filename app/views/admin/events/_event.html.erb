<script type="text/javascript">
  var data = gon.events
  var labels = gon.labels
  var w = 800
  var h = data.length * 30 + 10
  var chart = d3.select("div#event").append("svg")
    .attr("width", w)
    .attr("height", h)
    .attr("class", "chart")
    .append("g")
    .attr("transform", "translate(190,10)");
  var x = d3.scale.log()
    .domain([1, d3.max(data)])
    .range([1, 550]);
  var y = d3.scale.ordinal()
    .domain(labels)
    .rangeBands([0, labels.length * 30]);
  chart.selectAll("rect")
    .data(data)
    .enter().append("rect")
    .attr("fill", "#789aa1")
    .attr("y", y)
    .attr("width", x)
    .attr("height", y.rangeBand());
  chart.selectAll("text.labels")
    .data(labels)
    .enter().append("text")
    .attr("x", 0)
    .attr("y", function(d) { return y(d) + y.rangeBand() / 2; })
    .attr("dx", -180) // padding-right
    .attr("dy", ".35em") // vertical-align: middle
    .text(String)
  chart.selectAll("text.values")
    .data(data)
    .enter().append("text")
    .attr("x", x)
    .attr("y", function(d) { return y(d) + y.rangeBand() / 2; })
    .attr("dx", 3) // padding-right
    .attr("dy", ".35em") // vertical-align: middle
    .text(String)
</script>
