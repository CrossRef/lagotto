//= require articles/alm

describe("articles alm", function() {

  var json = {"total":1,"total_pages":1,"page":1,"error":null,"data":[{"doi":"10.1371/journal.pone.0044271","title":"Lesula: A New Species of Cercopithecus Monkey Endemic to the Democratic Republic of Congo and Implications for Conservation of Congoâ€™s Central Basin","canonical_url":"http://www.plosone.org/article/info:doi/10.1371/journal.pone.0044271","mendeley_uuid":"3dc19937-61db-35a5-b374-2c7ecd45cdfc","pmid":"22984482","pmcid":"3440422","issued":{"date_parts":[2012,9,12]},"viewed":130153,"saved":79,"discussed":1341,"cited":5,"update_date":"2014-04-21T08:36:51Z","sources":[{"name":"citeulike","display_name":"CiteULike","group_name":"saved","events_url":null,"metrics":{"pdf":null,"html":null,"shares":0,"groups":null,"comments":null,"likes":null,"citations":null,"total":0},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-15T20:12:19Z"},{"name":"pubmed","display_name":"PubMed","group_name":"cited","events_url":"http://www.ncbi.nlm.nih.gov/sites/entrez?db=pubmed&cmd=link&LinkName=pubmed_pmc_refs&from_uid=22984482","metrics":{"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":1,"total":1},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-15T20:18:36Z"},{"name":"wordpress","display_name":"Wordpress.com","group_name":"discussed","events_url":"http://en.search.wordpress.com/?q=\"10.1371/journal.pone.0044271\"&t=post","metrics":{"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":4,"total":4},"by_day":[{"year":2012,"month":9,"day":14,"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":1,"total":1},{"year":2012,"month":9,"day":17,"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":2,"total":2}],"by_month":[{"year":2012,"month":9,"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":3,"total":3},{"year":2013,"month":2,"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":1,"total":1}],"by_year":[{"year":2012,"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":3,"total":3},{"year":2013,"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":1,"total":1}],"update_date":"2014-04-15T20:18:13Z"},{"name":"reddit","display_name":"Reddit","group_name":"discussed","events_url":null,"metrics":{"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":0,"total":0},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-15T20:13:22Z"},{"name":"wikipedia","display_name":"Wikipedia","group_name":"discussed","events_url":"http://en.wikipedia.org/w/index.php?search=\"10.1371%2Fjournal.pone.0044271\"","metrics":{"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":34,"total":34},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-15T20:16:47Z"},{"name":"datacite","display_name":"DataCite","group_name":"cited","events_url":null,"metrics":{"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":0,"total":0},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-15T21:00:28Z"},{"name":"scopus","display_name":"Scopus","group_name":"cited","events_url":"http://www.scopus.com/inward/citedby.url?partnerID=HzOxMe3b&scp=84866315704","metrics":{"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":5,"total":5},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-21T08:35:48Z"},{"name":"mendeley","display_name":"Mendeley","group_name":"saved","events_url":"http://www.mendeley.com/catalog/lesula-new-species-cercopithecus-monkey-endemic-democratic-republic-congo-implications-conservation/","metrics":{"pdf":null,"html":null,"shares":79,"groups":0,"comments":null,"likes":null,"citations":null,"total":79},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-21T08:35:16Z"},{"name":"facebook","display_name":"Facebook","group_name":"discussed","events_url":null,"metrics":{"pdf":null,"html":null,"shares":604,"groups":null,"comments":256,"likes":481,"citations":null,"total":1341},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-21T08:36:39Z"},{"name":"pmc","display_name":"PubMed Central Usage Stats","group_name":"viewed","events_url":null,"metrics":{"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":0},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-21T08:34:57Z"},{"name":"counter","display_name":"Counter","group_name":"viewed","events_url":"http://www.plosreports.org/services/rest?method=usage.stats&doi=10.1371%2Fjournal.pone.0044271","metrics":{"pdf":3217,"html":126869,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":130153},"by_day":null,"by_month":[{"year":2012,"month":9,"pdf":2145,"html":84638,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":86783},{"year":2012,"month":10,"pdf":190,"html":6488,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":6678},{"year":2012,"month":11,"pdf":100,"html":2195,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":2295},{"year":2012,"month":12,"pdf":42,"html":4115,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":4157},{"year":2013,"month":1,"pdf":41,"html":1842,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1883},{"year":2013,"month":2,"pdf":48,"html":1955,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":2003},{"year":2013,"month":3,"pdf":45,"html":1388,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1433},{"year":2013,"month":4,"pdf":38,"html":1635,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1673},{"year":2013,"month":5,"pdf":53,"html":6850,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":6903},{"year":2013,"month":6,"pdf":26,"html":2499,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":2525},{"year":2013,"month":7,"pdf":14,"html":1098,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1112},{"year":2013,"month":8,"pdf":10,"html":642,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":652},{"year":2013,"month":9,"pdf":33,"html":994,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1027},{"year":2013,"month":10,"pdf":40,"html":1736,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1776},{"year":2013,"month":11,"pdf":34,"html":1279,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1313},{"year":2013,"month":12,"pdf":13,"html":1056,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1069},{"year":2014,"month":1,"pdf":294,"html":3131,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":3425},{"year":2014,"month":2,"pdf":19,"html":1194,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1213},{"year":2014,"month":3,"pdf":23,"html":1411,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":1434},{"year":2014,"month":4,"pdf":9,"html":723,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":732}],"by_year":[{"year":2012,"pdf":2477,"html":97436,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":99953},{"year":2013,"pdf":395,"html":22974,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":23385},{"year":2014,"pdf":345,"html":6459,"shares":null,"groups":null,"comments":null,"likes":null,"citations":null,"total":6815}],"update_date":"2014-04-21T08:24:22Z"},{"name":"f1000","display_name":"F1000Prime","group_name":"recommended","events_url":null,"metrics":{"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":0,"total":0},"by_day":null,"by_month":null,"by_year":null,"update_date":"2014-04-21T08:35:59Z"},{"name":"crossref","display_name":"CrossRef","group_name":"cited","events_url":null,"metrics":{"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":7,"total":7},"by_day":null,"by_month":null,"by_year":[{"year":2013,"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":3,"total":3},{"year":2014,"pdf":null,"html":null,"shares":null,"groups":null,"comments":null,"likes":null,"citations":4,"total":4}],"update_date":"2014-04-21T08:36:51Z"}]}]};
  var options = {
    baseUrl: '',
    minItemsToShowGraph: {
        minEventsForYearly: 3,
        minEventsForMonthly: 3,
        minEventsForDaily: 3,
        minYearsForYearly: 1,
        minMonthsForMonthly: 1,
        minDaysForDaily: 1
    },
    vizDiv: "#metrics",
    showTitle: false,
    groups: [{ name: "viewed", display_name: "Viewed" },
             { name: "cited", display_name: "Cited" },
             { name: "saved", display_name: "Saved" },
             { name: "discussed", display_name: "Discussed" },
             { name: "recommended", display_name: "Recommended" }]
  };

  it('should allow setting and retrieve chart data', function () {
    div = d3.select('body').append('div')
      .attr("id", "metrics");
    options['almStatsJson'] = json["data"];

    var almviz = new AlmViz(options);
    almviz.initViz();
  });

});
